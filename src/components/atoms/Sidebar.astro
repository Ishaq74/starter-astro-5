---
import { Icon } from 'astro-icon/components';

const {
  menuItems = [
    { icon: 'mdi:gesture-tap-button', label: 'Button', href: '#button' },
    { icon: 'mdi:form-textbox', label: 'Input', href: '#input' },
    { icon: 'mdi:card-outline', label: 'Card', href: '#card' },
    { icon: 'mdi:link', label: 'Link', href: '#link' },
    { icon: 'mdi:format-list-bulleted', label: 'List', href: '#list' },
    { icon: 'mdi:text', label: 'Text', href: '#text' },
    { icon: 'mdi:table', label: 'Table', href: '#table' },
    { icon: 'mdi:shape', label: 'Wrapper', href: '#wrapper' },
    { icon: 'mdi:vector-intersection', label: 'Section', href: '#section' }
  ]
} = Astro.props;
---

<aside class="sidebar" role="complementary" aria-label="Sidebar de navigation">
  <input id="sidebar-toggle" class="sidebar-toggle-input" type="checkbox" aria-hidden="true">
  <nav class="sidebar-nav" aria-label="Sommaire des composants">
    <label for="sidebar-toggle" class="sidebar-toggle" aria-controls="sidebar-list" aria-label="Afficher le sommaire">â˜°</label>
    <ul id="sidebar-list">
      <li>
        <a href="#all" class="menu-link" data-href="#all">
          <Icon name="mdi:view-dashboard" size={18} class="menu-icon" />
          <span class="menu-label">Tous</span>
        </a>
      </li>
      {menuItems.map(item => (
        <li>
          <a href={item.href} class="menu-link" data-href={item.href}>
            <Icon name={item.icon} size={18} class="menu-icon" />
            <span class="menu-label">{item.label}</span>
          </a>
        </li>
      ))}
    </ul>
  </nav>
</aside>

<style>
  .sidebar { padding: var(--space-4); background: var(--color-surface); border-radius: var(--radius-2); }
  .sidebar-nav ul { list-style: none; margin: 0; padding: 0; display: grid; gap: .5rem; }
  .sidebar-toggle { display:none; margin-bottom: .5rem; background: transparent; border: 1px solid var(--color-border); padding: .25rem .5rem; border-radius: var(--radius-1); cursor: pointer; user-select: none; }
  .sidebar-toggle-input { position: absolute !important; left: -9999px !important; width: 1px !important; height: 1px !important; overflow: hidden !important; }
  .menu-link { display: flex; align-items: center; gap: .5rem; color: var(--color-text); text-decoration: none; padding: .45rem .75rem; border-radius: var(--radius-1); transition: background .12s ease, color .12s ease, transform .12s ease; }
  .menu-link:hover { background: var(--color-surface-2); transform: translateX(2px); }
  .menu-link:focus { outline: none; }
  .menu-link:focus-visible { box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-focus) 15%, transparent); border-radius: var(--radius-1); }
  .menu-link.active, .menu-link[aria-current="true"] { background: var(--color-primary); color: var(--color-on-primary); }
  .menu-icon { color: inherit; opacity: .95; }

  /* Make the 'Tous' item stand out slightly */
  a.menu-link[data-href="#all"] { font-weight: 700; }

  @media (min-width: 768px) {
    .sidebar { position: sticky; top: 1rem; }
  }
  @media (max-width: 900px) {
    .sidebar { padding: var(--space-3); }
    .sidebar-toggle { display:inline-block; }
    /* checkbox-driven toggle: when the checkbox is not checked hide list */
    #sidebar-list { display: none; }
    /* when the hidden checkbox is checked, show the list */
    .sidebar-toggle-input:checked + .sidebar-nav #sidebar-list { display: block; }
  }
</style>
